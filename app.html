<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="js/nfc-handler.js"></script>
    <title>甘吧茶ㄉㄟˊ</title>
</head>

<body>
    <div class="container">
        <div class="menu center">
            <h1>歡迎光臨<br>甘吧茶ㄉㄟˊ</h1>
            <img src="img/4in1.png" alt="">
            <div class="buttons">
                <button>校外展導覽</button>
                <a href="index.html"><button>專題網站</button></a>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="personal center">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動展覽</p>
            </div>
            <div class="personal2">
                <h1>探險啟程&ensp;Let's go~</h1>
                <img id="didi" src="img/didi.png" alt="">
                <input class="m1" type="text" id="userName" name="username" placeholder="暱稱："
                    autocomplete="off" /><br>
                <button id="startButton" class="btn btn-primary">任務開始</button>
                <div id="image-container">
                    <img src="img/kv3.png" alt="Left Image" class="image left-image w-100">
                    <img src="img/kv5.png" alt="Right Image" class="image right-image w-100">
                    <img src="img/kv7.png" alt="Left Image" class="image left-image w-100">
                    <img src="img/kv9.png" alt="Right Image" class="image right-image w-100">
                </div>
                <script>
                    window.addEventListener("load", function () {
                        var images = document.querySelectorAll(".image");
                        var delays = {
                            "img/kv3.png": 1500,
                            "img/kv5.png": 1500,
                            "img/kv7.png": 2500,
                            "img/kv9.png": 2500
                        };
                        images.forEach(function (image) {
                            var src = image.getAttribute("src");
                            var delay = delays[src] || 1000;
                            setTimeout(function () {
                                image.style.opacity = "1";
                                image.style.transform = "translateX(0)";
                            }, delay);
                        });
                    });
                </script>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="stepone center">
            <h1>第一步</h1>
            <h3>請取一張貼紙</h3>
            <h1 class="userNameDisplay"></h1>
            <img src="https://img.lovepik.com/free-png/20211214/lovepik-teapot-png-image_401582765_wh1200.png" alt="">
            <button class="btn btn-primary" onclick="scrollToNextSection()">往下一步</button>
        </div>
    </div>
    <div class="container">
        <div class="nfc center">
            <h1>請靠近NFC貼紙<br>聽聽茶莊阿姨的話</h1>
            <h1 class="userNameDisplay"></h1>
            <div class="nfcpart" id="nfc1" data-youtube-id="VIDEO_ID_1">
                <h3>part 1</h3>
                <img src="img/kv7.png" alt="">
                <button class="next-button">next</button>
            </div>
            <div class="nfcpart" id="nfc2" data-youtube-id="VIDEO_ID_2">
                <h3>part 2</h3>
                <img src="img/kv7.png" alt="">
                <button class="prev-button">prev</button>
                <button class="next-button">next</button>
            </div>
            <div class="nfcpart" id="nfc3" data-youtube-id="VIDEO_ID_3">
                <h3>part 3</h3>
                <img src="img/kv7.png" alt="">
                <button class="prev-button">prev</button>
                <button class="next-button">next</button>

            </div>
            <div class="nfcpart" id="nfc4" data-youtube-id="VIDEO_ID_4">
                <h3>part 4</h3>
                <img src="img/kv7.png" alt="">
                <button class="prev-button">prev</button>
                <button class="finish-button">聽完了</button>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="goin center">
            <h1>拉開門簾進入體驗區</h1>
            <h1 class="userNameDisplay"></h1>
            <img src="img/b1.png" alt="">
            <button>GO</button>
        </div>
    </div>
    <div class="container">
        <div class="vr center">
            <p>聞一聞吧~</p>
            <h1>戴上VR眼鏡<br>漫步茶園</h1>
            <h1 class="userNameDisplay"></h1>
            <img src="https://obs.line-scdn.net/0hEEmMQbqwGmpQNAz_JzFlPWhiFhtjUgBjclIAXCBmQ1l6GA0_aQJJCXU3RUZ1Vlg_cAEFCiA9FgkuAAk7ZA/w644"
                alt="">
            <div class="vrbg">
                <h1>VR360<h1>
                    <button>往下一步</button>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="D center">
            <h1>知識調查局</h1>
            <h3>拿IPAD看一下3D的製茶工序</h3>
            <h1 class="userNameDisplay"></h1>
            <img src="img/採菁.gif" alt="">
            <button>看完了</button>
        </div>
    </div>
    <div class="container">
        <div class="test center">
            <h1>小考驗</h1>
            <h1 class="userNameDisplay"></h1>
            <div class="question" id="question1">
                <h2>題目1/5</h2>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore tempore maiores aliquam harum rerum
                    nulla commodi eveniet ex amet eius cumque, officia, sapiente tenetur </p>
                <button class="next-button">下一題</button>
            </div>
            <div class="question" id="question2">
                <h2>題目2/5</h2>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore tempore maiores aliquam harum rerum
                    nulla commodi eveniet ex amet eius cumque, officia, sapiente </p>
                <button class="prev-button">上一題</button>
                <button class="next-button">下一題</button>
            </div>
            <div class="question" id="question3">
                <h2>題目3/5</h2>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing </p>
                <button class="prev-button">上一題</button>
                <button class="next-button">下一題</button>
            </div>
            <div class="question" id="question4">
                <h2>題目4/5</h2>
                <p>Lorem ipsum dolor sit amet consectetur </p>
                <button class="prev-button">上一題</button>
                <button class="next-button">下一題</button>
            </div>
            <div class="question" id="question5">
                <h2>題目5/5</h2>
                <p>Lorem ipsum dolor sit </p>
                <button class="prev-button">上一題</button>
                <button class="submit-button">提交</button>
            </div>
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const questions = document.querySelectorAll('.test .question');
                    let currentQuestionIndex = 0;

                    function showCurrentQuestion() {
                        questions.forEach((question, index) => {
                            if (index === currentQuestionIndex) {
                                question.style.display = 'block';
                            } else {
                                question.style.display = 'none';
                            }
                        });
                    }

                    function nextQuestion() {
                        if (currentQuestionIndex < questions.length - 1) {
                            currentQuestionIndex++;
                            showCurrentQuestion();
                        }
                    }

                    function prevQuestion() {
                        if (currentQuestionIndex > 0) {
                            currentQuestionIndex--;
                            showCurrentQuestion();
                        }
                    }

                    // Event listeners for next and previous buttons
                    const nextButtons = document.querySelectorAll('.test .next-button');
                    nextButtons.forEach(button => {
                        button.addEventListener('click', nextQuestion);
                    });

                    const prevButtons = document.querySelectorAll('.test .prev-button');
                    prevButtons.forEach(button => {
                        button.addEventListener('click', prevQuestion);
                    });

                    showCurrentQuestion();
                });
            </script>
        </div>
    </div>
    <div class="container">
        <div class="web center">
            <h1 class="userNameDisplay"></h1>
            <h1>看專題網站</h1>
            <h1>給我去看!!!</h1>
            <img src="img/keyvision.PNG" alt="">
            <button>下一步</button>
        </div>
    </div>
    <div class="container">
        <div class="draw center">
            <h1>到IPAD繪畫區</h1>
            <h1 class="userNameDisplay"></h1>
            <h1>畫屬於你的滴/留言</h1>
            <h2>範例：</h2>
            <img src="img/t1.png" alt="">
            <button>好了</button>
        </div>
    </div>
    <div class="container">
        <div class="end center">
            <h1 class="userNameDisplay"></h1>
            <h1>導覽結束</h1>
            <img src="img/t1-1.png" alt="">
            <h1>謝謝光臨甘吧茶ㄉㄟˊ</h1>
            <a href="index.html"><button>專題網站</button></a>
            <button>回饋表單</button>
            <a href="app.html"><button>重新體驗</button></a>
        </div>
    </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const sections = document.querySelectorAll('.container > div');
            let currentSectionIndex = 0;
            let isScrolling = false;
            let touchStartY;
            let userName = '';

            // Event listener for the "開始" button
            document.getElementById('startButton').addEventListener('click', function () {
                // Get the entered name
                userName = document.getElementById('userName').value;

                // Display the entered name on step one
                document.getElementById('userNameDisplay').innerText = userName;

                // Progress to the next section
                scrollToNextSection(1);
            });

            function showCurrentSection() {
                sections.forEach((section, index) => {
                    if (index === currentSectionIndex) {
                        section.style.display = 'block';
                    } else {
                        section.style.display = 'none';
                    }
                });

                // Display the entered name on each section
                // Display the entered name on each section
                if (currentSectionIndex !== 0) { // Skip the personal section
                    const userNameDisplayElement = sections[currentSectionIndex].querySelector('.userNameDisplay');
                    if (userNameDisplayElement) {
                        userNameDisplayElement.innerText = userName;
                    }
                }

            }

            function scrollToSection(index) {
                currentSectionIndex = index;
                showCurrentSection();
                isScrolling = true;
                setTimeout(() => {
                    isScrolling = false;
                }, 800); // Adjust the delay time based on your preference
            }

            function scrollToNextSection() {
                if (currentSectionIndex < sections.length - 1) {
                    scrollToSection(currentSectionIndex + 1);
                }
            }

            function handleWheel(event) {
                if (!isScrolling) {
                    if (event.deltaY > 0) {
                        // Scrolling down
                        if (currentSectionIndex < sections.length - 1) {
                            scrollToSection(currentSectionIndex + 1);
                        }
                    } else {
                        // Scrolling up
                        if (currentSectionIndex > 0) {
                            scrollToSection(currentSectionIndex - 1);
                        }
                    }
                }
                event.preventDefault();
            }

            function handleTouchStart(event) {
                touchStartY = event.touches[0].clientY;
            }

            function handleTouchMove(event) {
                if (!isScrolling) {
                    const touchEndY = event.touches[0].clientY;
                    const deltaY = touchEndY - touchStartY;

                    if (deltaY > 50) {
                        // Swiped down
                        if (currentSectionIndex > 0) {
                            scrollToSection(currentSectionIndex - 1);
                        }
                    } else if (deltaY < -50) {
                        // Swiped up
                        if (currentSectionIndex < sections.length - 1) {
                            scrollToSection(currentSectionIndex + 1);
                        }
                    }
                }
            }

            window.addEventListener('wheel', handleWheel);
            window.addEventListener('touchstart', handleTouchStart);
            window.addEventListener('touchmove', handleTouchMove);

            // Smooth scroll to the next section when any button (excluding specific classes) is clicked
            const allButtons = document.querySelectorAll('.container button');
            allButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // Exclude buttons with specific classes from smooth scroll
                    if (!button.classList.contains('next-button') && !button.classList.contains('prev-button')) {
                        scrollToNextSection();
                    }
                });
            });

            // Show the initial section
            showCurrentSection();
        });
    </script>

</body>
</html>