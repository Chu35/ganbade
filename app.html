<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/mp3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha384-oZv8k+1lF5ZPGgHr8FqA1uLjFpTlJ5x/IbAdQxS9AexJ7eFOF5bVpZa19z7Ftix5" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" />
    <title>甘吧茶ㄉㄟˊ</title>
</head>

<body>
    <div class="container">
        <div class="bar">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動導覽</p>
            </div>
            <div class="personal2">
                <h1>探險啟程&ensp;Let's go~</h1>
                <img id="didi" src="img/didi.png" alt="">
                <input class="m1" type="text" id="userName" name="username" placeholder="暱稱：" autocomplete="off" /><br>
                <button id="startButton" class="btn btn-primary">任務開始</button>
                <div id="image-container">
                    <img src="img/kv3.png" alt="Left Image" class="image left-image w-100">
                    <img src="img/kv5.png" alt="Right Image" class="image right-image w-100">
                    <img src="img/kv7.png" alt="Left Image" class="image left-image w-100">
                    <img src="img/kv9.png" alt="Right Image" class="image right-image w-100">
                </div>
                <script>
                    window.addEventListener("load", function () {
                        var images = document.querySelectorAll(".image");
                        var delays = {
                            "img/kv3.png": 300,
                            "img/kv5.png": 300,
                            "img/kv7.png": 1500,
                            "img/kv9.png": 1500
                        };
                        images.forEach(function (image) {
                            var src = image.getAttribute("src");
                            var delay = delays[src] || 1000;

                            setTimeout(function () {
                                image.style.opacity = "1";
                                image.style.transform = "translateX(0)";
                            }, delay);
                        });
                    });
                </script>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="bar">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動導覽</p>
            </div>
            <div class="stepone">
                <h1 style="color: #fff;background: url('img/back.png') center/cover no-repeat;width: 220px;">任務一</h1>
                <h3 style="margin: 3px 12px 0;" class="userNameDisplay"></h3>
                <h2 style="margin: 3px 12px 0;" >請拿一張渲染貼紙<br>寫上你/妳對
                    <span style="color: #13693F;">茶</span>的印象
                </h2>
                <img src="img/sticker.png" alt="">
                <h2><span style="color: #B69779;">寫完後請貼到茶杯上方處</span></h2>
                <button class="btn btn-primary finish-button" onclick="scrollToNextSection()">下一頁</button>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="bar">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動導覽</p>
            </div>
            <div class="nfc">
                <h1 style="color: #fff;background: url('img/back.png') center/cover no-repeat;width: 220px;">任務二</h1>
                <h3 style="margin: 3px 12px 0;" class="userNameDisplay"></h3>

                <h2 style="margin: 3px 12px 0;" >聽聽茶莊阿姨的心聲吧</h2>
                <div class="nfcpart" id="nfc1">
                    <div class="part">
                        <img src="img/n1.jpg" alt="">
                        <h3>長輩不擅長網路經營</h3>
                    </div>
                </div>
                <div class="nfcpart" id="nfc2">
                    <div class="part">
                        <img src="img/n2.jpg" alt="">
                        <p>政府資助茶產業只是一時的</p>
                    </div>
                </div>
                <div class="nfcpart" id="nfc3">
                    <div class="part">
                        <img src="img/n3.jpg" alt="">
                        <p>年輕人不願意回來接手茶莊</p>
                    </div>
                </div>
                <div class="nfcpart" id="nfc4">
                    <div class="part">
                        <img src="img/n4.jpg" alt="">
                        <p>年輕人應該多喝茶，少喝手搖飲</p>
                    </div>        
                </div>
                <div id="app-cover">
                    <div id="player">
                        <div id="player-track">
                            <div id="album-name"></div>
                            <div id="track-time">
                                <div id="current-time"></div>
                                <div id="track-length"></div>
                            </div>
                            <div id="s-area">
                                <div id="ins-time"></div>
                                <div id="s-hover"></div>
                                <div id="seek-bar"></div>
                            </div>
                        </div>
                        <div id="player-content">
                            <div id="album-art">
                                <img src="img/n1.jpg" class="active" id="_1">
                                <img src="img/n2.jpg" id="_2">
                                <img src="img/n3.jpg" id="_3">
                                <img src="img/n4.jpg" id="_4">
                                <div id="buffer-box">Buffering ...</div>
                            </div>
                            <div id="player-controls">
                                <div class="control">
                                    <div class="button" id="play-previous">
                                        <i class="fas fa-backward"></i>
                                    </div>
                                </div>
                                <div class="control">
                                    <div class="button" id="play-pause-button">
                                        <i class="fas fa-play"></i>
                                    </div>
                                </div>
                                <div class="control">
                                    <div class="button" id="play-next">
                                        <i class="fas fa-forward"></i>
                                    </div>
                                </div>
                            </div>                                                
                            <p><span style="color: #B69779;">點擊播放鍵聆聽下一則</span></p>
                        </div>
                        <button id="listen" class="finish-button2" style="display: none;">聽完了</button>
                        <button id="pass" class="finish-button2" style="display: block;">跳過</button>
                    </div>
                </div>
                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        var currentPart = 1; // Initial part
                
                        document.getElementById('play-next').addEventListener('click', function () {
                            // Handle the forward button click
                            if (currentPart < 4) {
                                currentPart++;
                                updateNFCPart(currentPart);
                            }
                        });
                
                        document.getElementById('play-previous').addEventListener('click', function () {
                            // Handle the backward button click
                            if (currentPart > 1) {
                                currentPart--;
                                updateNFCPart(currentPart);
                            }
                        });
                
                        function updateNFCPart(partNumber) {
                            // Update the displayed image based on the current part
                            var nfcParts = document.querySelectorAll('.nfcpart');
                            nfcParts.forEach(function (part) {
                                part.style.display = 'none';
                            });
                
                            var currentNFCPart = document.getElementById('nfc' + partNumber);
                            currentNFCPart.style.display = 'block';
                
                            // Optionally, update the album art in the player
                            var albumArtImages = document.querySelectorAll('#album-art img');
                            albumArtImages.forEach(function (img) {
                                img.classList.remove('active');
                            });
                
                            var currentAlbumArt = document.getElementById('_' + partNumber);
                            currentAlbumArt.classList.add('active');
                
                            // Update the visibility of buttons based on the current part
                            var listenButton = document.getElementById('listen');
                            var passButton = document.getElementById('pass');
                
                            if (currentPart < 4) {
                                listenButton.style.display = 'none';
                                passButton.style.display = 'block';
                            } else {
                                listenButton.style.display = 'block';
                                passButton.style.display = 'none';
                            }
                        }
                    });
                </script>
                              
            </div>
        </div>
    </div>
    <div class="container">
        <div class="bar">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動導覽</p>
            </div>
            <div class="vr">
                <h1 style="color: #fff;background: url('img/back.png') center/cover no-repeat;width: 220px;">任務三</h1>
                <h3 style="margin: 3px 12px 0;" class="userNameDisplay"></h3>

                <h2>拉開門簾進入體驗區<br>
                    戴上VR眼鏡 漫遊茶園～</h2>
                <img src="img/vr.png" alt="">
                <h2><span style="color: #808F66;">打開五官感受</span></h2>
                <button class="finish-button">下一頁</button>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="bar">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動導覽</p>
            </div>
            <div class="D">
                <h1 style="color: #fff;background: url('img/back.png') center/cover no-repeat;width: 220px;">任務四</h1>
                <h3 style="margin: 3px 12px 0;" class="userNameDisplay"></h3>

                <h2>拿起展示ipad對準圓形圖片<br>
                    看看製茶的工序！</h2>
                <img src="img/ar.png" alt="">
                <button class="finish-button">下一頁</button>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="bar">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動導覽</p>
            </div>
            <div class="test">
                <h1 style="margin: 3px 12px 0;color: #fff;background: url('img/back.png') center/cover no-repeat;width: 220px;">任務五</h1>
                <h3 style="margin: 3px 12px 0;" class="userNameDisplay"></h3>

                <!-- Question 1 -->
                <div class="question" id="question1">
                    <h2 style="margin: 32px 39px 0">請依據茶多酚實驗室的內容完成小考察</h2>
                    <div class="ques" id="question1Options">
                        <h3>台灣盛產哪三大類茶？</h3>
                        <div class="btn" onclick="checkAnswer('question1', '紅茶、綠茶、奶茶')">紅茶、綠茶、奶茶</div>
                        <div class="btn" onclick="checkAnswer('question1', '紅茶、綠茶、烏龍茶')">紅茶、綠茶、烏龍茶</div>
                        <div class="btn" onclick="checkAnswer('question1', '白茶、綠茶、紅茶')">白茶、綠茶、紅茶</div>
                    </div>
                </div>
                <!-- Question 2 -->
                <div class="question" id="question2">
                    <h2>請依據知識調查局的內容完成小考察</h2>
                    <div class="ques" id="question2Options">
                        <h3>通常發酵程度越高，則茶湯顏色偏__？</h3>
                        <div class="btn" onclick="checkAnswer('question2', '深')">深</div>
                        <div class="btn" onclick="checkAnswer('question2', '淺')">淺</div>
                        <div class="btn" onclick="checkAnswer('question2', '沒有影響')">沒有影響</div>
                    </div>
                </div>
                <!-- Question 3 -->
                <div class="question" id="question3">
                    <h2>請依據知識調查局的內容完成小考察</h2>
                    <div class="ques" id="question3Options">
                        <h3>茶葉的形狀來自哪個工序？</h3>
                        <div class="btn" onclick="checkAnswer('question3', '揉捻')">揉捻</div>
                        <div class="btn" onclick="checkAnswer('question3', '殺菁')">殺菁</div>
                        <div class="btn" onclick="checkAnswer('question3', '萎凋')">萎凋</div>
                    </div>
                </div>
                <!-- Question 4 -->
                <div class="question" id="question4">
                    <h2>請依據知識調查局的內容完成小考察</h2>
                    <div class="ques" id="question4Options">
                        <h3>一般白茶在製作時會經過哪兩道工序？</h3>
                        <div class="btn" onclick="checkAnswer('question4', '浪菁、烘乾')">浪菁、烘乾</div>
                        <div class="btn" onclick="checkAnswer('question4', '萎凋、烘乾')">萎凋、烘乾</div>
                        <div class="btn" onclick="checkAnswer('question4', '殺菁、萎凋')">殺菁、萎凋</div>
                    </div>
                </div>
                <!-- Question 5 -->
                <div class="question" id="question5">
                    <h2>請依據知識調查局的內容完成小考察</h2>
                    <div class="ques" id="question5Options">
                        <h3>東方美人茶的特殊香氣源自於哪種昆蟲？</h3>
                        <div class="btn" onclick="checkAnswer('question5', '蝴蝶')">蝴蝶</div>
                        <div class="btn" onclick="checkAnswer('question5', '蜜蜂')">蜜蜂</div>
                        <div class="btn" onclick="checkAnswer('question5', '小綠葉蟬')">小綠葉蟬</div>
                    </div>
                    <button class="finish-button" onclick="finishQuiz()">下一頁</button>
                </div>
                <div id="score">Score: 0</div>
                <!-- Progress bar container -->
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <script>
                    let score = 0; // Initialize the score
                    function checkAnswer(questionId, selectedOption) {
                        const correctOption = getCorrectOption(questionId);

                        const questionElement = document.getElementById(questionId);
                        const options = questionElement.querySelectorAll('.btn');

                        if (selectedOption === correctOption) {
                            // User selected the correct answer
                            questionElement.classList.add('correct');
                            score += 20; // Increment the score for a correct answer
                        } else {
                            // User selected the wrong answer
                            questionElement.classList.remove('correct');
                            questionElement.classList.add('incorrect');
                            options.forEach(option => {
                                if (option.textContent === correctOption) {
                                    option.classList.add('correct-answer');
                                }
                            });
                        }

                        updateScoreDisplay();
                        updateProgressBar();
                        setTimeout(function () {
                            showNextQuestion(questionId);
                        }, 1000);
                    }

                    function updateScoreDisplay() {
                        const scoreDisplay = document.getElementById("score");
                        if (scoreDisplay) {
                            scoreDisplay.textContent = `Score: ${score}`;
                        }
                    }

                    function updateProgressBar() {
                        const progressBar = document.getElementById("progressBar");
                        if (progressBar) {
                            const maxScore = 100; // Assuming a maximum score of 100
                            const percentage = (score / maxScore) * 100;
                            progressBar.style.height = `${percentage}%`;
                        }
                    }

                    function finishQuiz() {
                        alert(`Quiz finished! Your final score is ${score}`);
                        // You can add additional actions when the quiz finishes
                    }

                    // Function to get the correct option for a question
                    function getCorrectOption(questionId) {
                        switch (questionId) {
                            case "question1":
                                return "紅茶、綠茶、烏龍茶";
                            case "question2":
                                return "深";
                            case "question3":
                                return "揉捻";
                            case "question4":
                                return "浪菁、烘乾";
                            case "question5":
                                return "小綠葉蟬";
                            default:
                                return "";
                        }
                    }

                    // Function to show the next question
                    function showNextQuestion(currentQuestionId) {
                        var currentQuestion = document.getElementById(currentQuestionId);
                        currentQuestion.style.display = "none";

                        var nextQuestionId = getNextQuestionId(currentQuestionId);
                        var nextQuestion = document.getElementById(nextQuestionId);
                        if (nextQuestion) {
                            nextQuestion.style.display = "block";
                        }
                    }
                    function getNextQuestionId(currentQuestionId) {
                        switch (currentQuestionId) {
                            case "question1":
                                return "question2";
                            case "question2":
                                return "question3";
                            case "question3":
                                return "question4";
                            case "question4":
                                return "question5";
                            default:
                                return "question5";
                        }
                    }
                </script>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="bar">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動導覽</p>
            </div>
            <div class="web">
                <h1 style="color: #fff;background: url('img/back.png') center/cover no-repeat;width: 220px;">任務六</h1>
                <h3 style="margin: 3px 12px 0;" class="userNameDisplay"></h3>

                <h2>入座！觀看專題網站～</h2>
                <img src="img/web.png" alt="">
                <button class="finish-button">下一頁</button>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="bar">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動導覽</p>
            </div>
            <div class="draw">
                <h1 style="color: #fff;background: url('img/back.png') center/cover no-repeat;width: 220px;">最後的任務</h1>
                <h3 style="margin: 3px 12px 0;" class="userNameDisplay"></h3>

                <h2>到“ｉｐａｄ繪畫區”<br>
                    畫出屬於你/妳的滴滴也可以留言喔</h2>
                <img src="img/draw.png" alt=""><h2>示意圖</h2>
                <button class="finish-button">下一頁</button>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="bar">
            <div class="logo">
                <img src="img/logo.png" alt="">
                <h1>甘吧茶ㄉㄟˊ</h1>
                <p>展間互動導覽</p>
            </div>
            <div class="end">
                <h1 style="color: #fff;background: url('img/back.png') center/cover no-repeat;width: 220px;">頒發認證</h1>
                <h3 style="margin: 3px 12px 0;" class="userNameDisplay"></h3>
                <h3>請貼一張貼紙到展板的<br>
                    “探險員名冊“<br>
                    另一張貼紙請貼到認證卡上</h3>
                <img src="img/end.png" alt="">
                <h3><span style="color: #808F66;">恭喜你成為合格的探險員<br>
                        Have a nice day!</span></h3>
                <a href="app.html"><button id="around"><i class="fa fa-arrow-left"></i>&ensp;返回導覽頁面</button></a>
                <a href="https://docs.google.com/forms/d/1cY-hwjPfmqYYlpEXoVtUCTwEM9fuCkZ9vb9D1H9_-w0/viewform?edit_requested=true"><button id="endform">填寫回饋表單</button></a>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const sections = document.querySelectorAll('.container > div');
            let currentSectionIndex = 0;
            let isScrolling = false;
            let touchStartY;
            let userName = '';

            // Event listener for the "開始" button
            document.getElementById('startButton').addEventListener('click', function () {
                // Get the entered name
                userName = document.getElementById('userName').value;

                // Display the entered name on step one
                document.getElementById('userNameDisplay').innerText = userName;

                // Progress to the next section
                scrollToNextSection(1);
            });

            function showCurrentSection() {
    sections.forEach((section, index) => {
        if (index === currentSectionIndex) {
            section.style.display = 'block';
        } else {
            section.style.display = 'none';
        }
    });

    // Display the entered name on each section
    if (currentSectionIndex !== 0) { // Skip the personal section
        const userNameDisplayElement = sections[currentSectionIndex].querySelector('.userNameDisplay');
        if (userNameDisplayElement) {
            userNameDisplayElement.innerText = userName + "探險員";
        }
    }
}

            function scrollToSection(index) {
                currentSectionIndex = index;
                showCurrentSection();
                isScrolling = true;
                setTimeout(() => {
                    isScrolling = false;
                }, 800); // Adjust the delay time based on your preference
            }

            function scrollToNextSection() {
                if (currentSectionIndex < sections.length - 1) {
                    scrollToSection(currentSectionIndex + 1);
                }
            }

            function handleWheel(event) {
                if (!isScrolling) {
                    if (event.deltaY > 0) {
                        // Scrolling down
                        if (currentSectionIndex < sections.length - 1) {
                            scrollToSection(currentSectionIndex + 1);
                        }
                    } else {
                        // Scrolling up
                        if (currentSectionIndex > 0) {
                            scrollToSection(currentSectionIndex - 1);
                        }
                    }
                }
                event.preventDefault();
            }

            function handleTouchStart(event) {
                touchStartY = event.touches[0].clientY;
            }

            function handleTouchMove(event) {
                if (!isScrolling) {
                    const touchEndY = event.touches[0].clientY;
                    const deltaY = touchEndY - touchStartY;

                    if (deltaY > 50) {
                        // Swiped down
                        if (currentSectionIndex > 0) {
                            scrollToSection(currentSectionIndex - 1);
                        }
                    } else if (deltaY < -50) {
                        // Swiped up
                        if (currentSectionIndex < sections.length - 1) {
                            scrollToSection(currentSectionIndex + 1);
                        }
                    }
                }
            }

            window.addEventListener('wheel', handleWheel);
            window.addEventListener('touchstart', handleTouchStart);
            window.addEventListener('touchmove', handleTouchMove);

            // Smooth scroll to the next section when any button (excluding specific classes) is clicked
            const allButtons = document.querySelectorAll('.container button');
            allButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // Exclude buttons with specific classes from smooth scroll
                    if (!button.classList.contains('next-button') && !button.classList.contains('prev-button')) {
                        scrollToNextSection();
                    }
                });
            });

            // Show the initial section
            showCurrentSection();
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="js/nfc-handler.js"></script>
    <script src="js/mp3.js"></script>
</body>
</html>